# レポートに使用可能な指標リスト

このドキュメントは、集中力モニタリングシステムのレポートに使用できる指標をまとめたものです。卒業論文や研究用途で、他のAIに案を出させる際の参考資料として使用してください。

## 1. まばたき（Blink）関連指標

### 1.1 基本統計
- **まばたき回数（Blink Count）**: セッション全体でのまばたき総回数
- **まばたき頻度（Blink Rate）**: 単位時間あたりのまばたき回数（回/分）
- **平均まばたき間隔（Mean Blink Interval）**: 連続するまばたき間の平均時間
- **まばたき間隔の標準偏差（Blink Interval SD）**: まばたき間隔のばらつき

### 1.2 EAR（Eye Aspect Ratio）関連
- **平均EAR（Mean EAR）**: セッション全体の平均EAR値
- **EARの標準偏差（EAR SD）**: EAR値のばらつき
- **最小EAR（Min EAR）**: セッション中の最小EAR値（最も目が閉じた瞬間）
- **最大EAR（Max EAR）**: セッション中の最大EAR値
- **EARベースライン（EAR Baseline）**: 適応的に更新された開眼時の基準値
- **EAR閾値（EAR Threshold）**: まばたき検出に使用される閾値
- **EAR閾値超過回数（EAR Threshold Exceedances）**: EARが閾値を下回った回数

### 1.3 長時間閉眼検出
- **長時間閉眼回数（Long Closure Count）**: 一定時間以上目が閉じていた回数
- **長時間閉眼の総時間（Total Long Closure Time）**: 長時間閉眼の累計時間
- **最長閉眼時間（Max Closure Duration）**: 最も長く目が閉じていた時間

### 1.4 まばたきパターン
- **まばたきクラスタ（Blink Clusters）**: 短時間に集中して発生したまばたきのグループ
- **まばたきの規則性（Blink Regularity）**: まばたき間隔の規則性（変動係数など）

## 2. 視線（Gaze）関連指標

### 2.1 基本統計
- **平均視線偏差（Mean Gaze Deviation）**: キャリブレーション点からの平均的な視線のずれ
- **視線偏差の標準偏差（Gaze Deviation SD）**: 視線のばらつき
- **最大視線偏差（Max Gaze Deviation）**: 最も大きく視線がずれた値
- **視線偏差の範囲（Gaze Deviation Range）**: 最大値と最小値の差

### 2.2 視線座標
- **視線X座標の平均・標準偏差（Gaze X Mean/SD）**: 水平方向の視線位置
- **視線Y座標の平均・標準偏差（Gaze Y Mean/SD）**: 垂直方向の視線位置
- **視線座標の変動（Gaze Coordinate Variance）**: 視線位置の全体的な変動

### 2.3 閾値超過
- **視線閾値超過回数（Gaze Threshold Exceedances）**: 視線が閾値を超えた回数
- **視線閾値超過時間（Gaze Threshold Exceedance Time）**: 閾値を超えていた累計時間
- **視線閾値超過率（Gaze Threshold Exceedance Rate）**: セッション時間に対する超過時間の割合

### 2.4 視線の動き
- **視線移動速度（Gaze Movement Velocity）**: 視線が移動する速度
- **視線移動距離（Gaze Movement Distance）**: 視線が移動した総距離
- **視線固定回数（Gaze Fixation Count）**: 視線が一定範囲内に留まった回数
- **視線固定時間（Gaze Fixation Duration）**: 視線が固定されていた時間

### 2.5 視線パターン
- **サッカード回数（Saccade Count）**: 急速な視線移動の回数
- **サッカード速度（Saccade Velocity）**: 急速な視線移動の速度
- **視線の探索パターン（Gaze Exploration Pattern）**: 視線がどのように動いたかのパターン

## 3. リスクスコア関連指標

### 3.1 基本統計
- **平均リスクスコア（Mean Risk Score）**: セッション全体の平均リスク
- **リスクスコアの標準偏差（Risk Score SD）**: リスクのばらつき
- **最大リスクスコア（Max Risk Score）**: 最も高いリスク値
- **最小リスクスコア（Min Risk Score）**: 最も低いリスク値
- **リスクスコアの範囲（Risk Score Range）**: 最大値と最小値の差

### 3.2 リスクレベル
- **高リスク時間（High Risk Time）**: リスクが高い閾値を超えていた時間
- **高リスク時間率（High Risk Time Rate）**: セッション時間に対する高リスク時間の割合
- **高リスクエピソード数（High Risk Episodes）**: 連続して高リスクだった回数
- **平均高リスクエピソード時間（Mean High Risk Episode Duration）**: 高リスクエピソードの平均持続時間

### 3.3 アラート
- **アラート発火回数（Alert Count）**: アラートが発火した回数
- **アラート発火時間（Alert Time）**: アラートが発火していた累計時間
- **アラート発火率（Alert Rate）**: セッション時間に対するアラート時間の割合
- **アラート間隔（Alert Interval）**: 連続するアラート間の時間

## 4. 時間的パターン指標

### 4.1 セッション全体
- **セッション時間（Session Duration）**: 計測の総時間
- **有効フレーム数（Valid Frame Count）**: 正常に検出できたフレーム数
- **検出成功率（Detection Success Rate）**: 有効フレーム数 / 総フレーム数

### 4.2 時間帯別分析
- **初期段階の指標（Early Phase Metrics）**: セッション開始後一定時間の指標
- **中期段階の指標（Mid Phase Metrics）**: セッション中盤の指標
- **後期段階の指標（Late Phase Metrics）**: セッション終盤の指標
- **時間経過による変化率（Temporal Change Rate）**: 時間経過に伴う指標の変化

### 4.3 時間窓分析
- **移動平均（Moving Average）**: 一定時間窓での移動平均値
- **時間窓ごとの統計（Window-based Statistics）**: 一定時間窓での統計値

## 5. イベント関連指標

### 5.1 マーカー
- **マーカー数（Marker Count）**: ユーザーが設定したマーカーの数
- **マーカー間の時間（Time Between Markers）**: 連続するマーカー間の時間
- **マーカー付近の指標（Metrics Near Markers）**: マーカー前後の指標値

### 5.2 注意分散（Distractor）
- **注意分散時間（Distractor Time）**: 注意が分散していた時間
- **注意分散時間率（Distractor Time Rate）**: セッション時間に対する注意分散時間の割合
- **注意分散エピソード数（Distractor Episodes）**: 注意分散が発生した回数
- **注意分散時の指標（Metrics During Distraction）**: 注意分散時の各種指標値

## 6. 相関・統合指標

### 6.1 指標間の相関
- **EARとリスクスコアの相関（EAR-Risk Correlation）**: EARとリスクスコアの相関係数
- **視線とリスクスコアの相関（Gaze-Risk Correlation）**: 視線偏差とリスクスコアの相関係数
- **まばたき頻度と視線の相関（Blink-Gaze Correlation）**: まばたき頻度と視線の相関

### 6.2 統合指標
- **集中度スコア（Concentration Score）**: 複数の指標を統合した集中度
- **疲労度スコア（Fatigue Score）**: 疲労の程度を示すスコア
- **注意力スコア（Attention Score）**: 注意力の程度を示すスコア

## 7. 分布・ヒストグラム指標

### 7.1 分布の特徴
- **分布の歪度（Skewness）**: 分布の非対称性
- **分布の尖度（Kurtosis）**: 分布の尖り具合
- **分布のモード（Mode）**: 最頻値
- **分布の中央値（Median）**: 中央値

### 7.2 パーセンタイル
- **25パーセンタイル（25th Percentile）**: 下位25%の境界値
- **75パーセンタイル（75th Percentile）**: 上位25%の境界値
- **90パーセンタイル（90th Percentile）**: 上位10%の境界値
- **95パーセンタイル（95th Percentile）**: 上位5%の境界値

## 8. 変化率・トレンド指標

### 8.1 変化率
- **指標の変化率（Metric Change Rate）**: 時間経過に伴う指標の変化率
- **初期値からの変化（Change from Initial）**: 初期値からの変化量・変化率
- **トレンド（Trend）**: 指標の増加/減少傾向

### 8.2 変動性
- **変動係数（Coefficient of Variation）**: 標準偏差 / 平均値
- **変動の範囲（Variation Range）**: 最大値と最小値の差
- **変動のパターン（Variation Pattern）**: 変動の周期性やパターン

## 9. 異常検出指標

### 9.1 外れ値
- **外れ値の数（Outlier Count）**: 統計的に外れ値と判定された値の数
- **外れ値の割合（Outlier Rate）**: 外れ値の割合
- **外れ値のタイミング（Outlier Timing）**: 外れ値が発生したタイミング

### 9.2 異常パターン
- **異常なまばたきパターン（Abnormal Blink Pattern）**: 通常と異なるまばたきパターン
- **異常な視線パターン（Abnormal Gaze Pattern）**: 通常と異なる視線パターン
- **異常なリスクパターン（Abnormal Risk Pattern）**: 通常と異なるリスクパターン

## 10. 可視化用指標

### 10.1 時系列データ
- **時系列グラフ**: 時間軸に対する各指標の変化
- **時系列の平滑化**: 移動平均や指数平滑化による平滑化
- **時系列のトレンド**: 線形回帰や多項式回帰によるトレンド

### 10.2 2次元可視化
- **視線散布図**: X-Y座標での視線位置の分布
- **視線ヒートマップ**: 視線が集中した領域
- **リスク-時間散布図**: リスクスコアと時間の関係

### 10.3 閾値可視化
- **閾値超過のタイミング**: どのタイミングで閾値を超えたか
- **閾値超過の持続時間**: 閾値を超えていた時間
- **閾値超過の頻度**: 閾値を超えた頻度

## 11. 推奨される追加指標（実装推奨）

### 11.1 視線座標の詳細分析
- **視線のX座標時系列**: 水平方向の視線位置の時間変化
- **視線のY座標時系列**: 垂直方向の視線位置の時間変化
- **視線座標の閾値超過**: X/Y座標がそれぞれの閾値を超えたタイミング
- **視線の移動軌跡**: 視線がどのように動いたかの軌跡

### 11.2 閾値超過の詳細
- **EAR閾値超過のタイミング**: どのタイミングでEARが閾値を下回ったか
- **視線閾値超過のタイミング**: どのタイミングで視線が閾値を超えたか
- **リスク閾値超過のタイミング**: どのタイミングでリスクが閾値を超えたか
- **閾値超過の持続時間分布**: 閾値を超えていた時間の分布

### 11.3 イベントベースの分析
- **イベント前後の指標変化**: マーカーや注意分散前後の指標の変化
- **イベント間の指標比較**: 異なるイベント間での指標の比較
- **イベント発生時の指標値**: イベント発生時の各種指標値

### 11.4 パターン認識
- **集中パターン**: 集中している時の指標パターン
- **分散パターン**: 注意が分散している時の指標パターン
- **疲労パターン**: 疲労が蓄積している時の指標パターン

## 12. 実装の優先順位

### 高優先度（すぐに実装すべき）
1. 視線座標の時系列グラフ（X/Y座標）
2. 閾値超過のタイミング可視化
3. 視線座標の閾値超過検出
4. イベント（マーカー、注意分散）のタイミング表示

### 中優先度（次に実装すべき）
1. 視線移動速度・距離
2. 視線固定の検出
3. 時間帯別分析
4. 指標間の相関分析

### 低優先度（将来的に実装）
1. サッカード検出
2. パターン認識
3. 機械学習による予測
4. 高度な統計分析

## 13. グラフの改善案

### 13.1 現在の問題点
- 横長グラフ（3つの分布）が縦長画面で見にくい
- Risk/EAR/GAZEの統合グラフが画質が粗い
- 閾値超過のタイミングが分からない

### 13.2 改善案
1. **横長グラフの分割表示**: 3つの分布を3つのページに分けて表示（実装済み、バグ修正必要）
2. **高解像度グラフ**: グラフ生成時の解像度を上げる
3. **閾値線の強調**: 閾値を超えた部分を色分けして表示
4. **イベントマーカーの表示**: マーカーや注意分散のタイミングをグラフ上に表示
5. **ズーム機能**: 特定の時間範囲を拡大表示
6. **個別グラフ**: Risk、EAR、Gazeを別々のグラフとして表示
7. **視線座標グラフ**: X/Y座標の時系列を追加
8. **閾値超過ハイライト**: 閾値を超えた部分を背景色で強調

## 14. 参考文献・参考指標

### 14.1 学術的な指標
- **PERCLOS**: まばたきによる疲労検出指標
- **視線固定（Fixation）**: 視線が一定範囲に留まる状態
- **サッカード（Saccade）**: 急速な視線移動
- **瞳孔径（Pupil Size）**: 瞳孔の大きさ（実装されていないが参考）

### 14.2 実用的な指標
- **作業効率**: タスクの完了時間や正確性
- **主観的評価**: ユーザー自身の集中度評価
- **生理的指標**: 心拍数、体温など（実装されていないが参考）

---

このドキュメントは、システムの機能拡張や研究用途での指標選択の参考として使用してください。

